parameters:
  - name: gradle_task
    type: string
    default: "check assembleDebug"
  - name: unit_tests
    type: boolean
    default: false

steps:
  - task: Gradle@2
    inputs:
      workingDirectory: ''
      gradleWrapperFile: 'gradlew'
      gradleOptions: '-Xmx3072m'
      publishJUnitResults: ${{ parameters.unit_tests }}
      testResultsFiles: '**/TEST-*.xml'
      tasks: '${{ parameters.gradle_task }} -Pdomain_name=$(domain_name) -Papp_secret=$(app_secret) -PversionCode=$(Build.BuildNumber)'